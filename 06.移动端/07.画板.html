<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>canvas</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      #canvas {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background-color: rgba(0, 0, 0, 0.3);
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="350" height="400"></canvas>
    <button id="clear">清除画布</button>
    <script>
      // 获取画布
      const canvas = document.getElementById("canvas");
      const clearBtn = document.getElementById("clear");
      // 获取画笔
      const ctx = canvas.getContext("2d");

      const canvasTop = canvas.offsetTop - canvas.clientHeight / 2;
      const canvasLeft = canvas.offsetLeft - canvas.clientWidth / 2;

      canvas.addEventListener("touchstart", function (e) {
        const { clientX, clientY } = e.targetTouches[0];
        console.log(clientX, clientY);
        // 定义初始位置
        ctx.beginPath();
        ctx.moveTo(clientX - canvasLeft, clientY - canvasTop);
      });

      canvas.addEventListener("touchmove", function (e) {
        const { clientX, clientY } = e.targetTouches[0];
        // 定义初始位置
        ctx.lineTo(clientX - canvasLeft, clientY - canvasTop);
        ctx.stroke();
      });

      console.log(ctx);

      clearBtn.addEventListener("touchend", function (e) {
        ctx.clearRect(0, 0, canvas.clientWidth, canvas.clientHeight);
      });
    </script>
  </body>
</html>
